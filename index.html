<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>That one game where you have to find out who has a different question | PennBrennFun</title>
<link rel="icon" type="image/png" href="play.png">
<meta name="description" content="Each player gets a question and answers it in their head. Pass the device around. When everyone gets their question, they go around answering. DO NOT TALK UNTIL AFTER THE REAL QUESTION IS REVEALED. Then the real question is shown. Players guess who the imposter is. Justify your answer — even if you’re the imposter. Once the imposter is revealed, everyone shares their question. A moderator can view the real and imposter questions at the end.">
<style>
  :root {--accent-color: #1e88e5;}
  * {box-sizing: border-box;}
  body {
    font-family: Arial, sans-serif;
    margin:0; padding:0;
    background:#121212;
    color:#f0f0f0;
    display:flex;
    justify-content:center;
    align-items:center;
    min-height:100vh;
    text-align:center;
  }
  .container {
    width: 100%;
    max-width: 600px;
    padding: 20px;
    display:flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
  h2 {margin-bottom:10px;}
  select, input[type=number], button {
    width: 100%;
    padding: 15px;
    margin: 8px 0;
    font-size: 1.2em;
    border-radius:12px;
    border:none;
  }
  button {
    background: var(--accent-color);
    color: #fff;
    font-weight: bold;
    cursor: pointer;
    transition: background 0.3s;
  }
  button:hover {opacity:0.9;}
  .hidden {display:none;}
  .question-box {
    background:#1f1f1f;
    padding:30px;
    border-radius:15px;
    margin:20px 0;
    width:100%;
  }
  #questionText {
    font-size: 2em;
    font-weight: bold;
    margin-top: 15px;
  }
  #instructions {font-size:1.2em; margin-bottom:10px;}
  #resultsContent {text-align:left; margin-top:10px; font-size:1.3em;}
</style>
</head>
<body>
<div class="container">
  <!-- Setup -->
  <div id="setup">
    <h2>How to play:</h2>
    <p>Each player will see a question and answer it in their head. Pass the device after each turn. After all players have seen their questions, discuss your answers aloud, then reveal the real and imposter questions.</p>
    <label>Category:</label>
    <select id="category">
      <option value="sfw">SFW</option>
      <option value="mixednsfw">Mixed NSFW</option>
      <option value="dontworrynsfw">Don’t worry NSFW</option>
    </select>
    <label>Question Type:</label>
    <select id="qtype">
      <option value="number">Number</option>
      <option value="phrase">Phrase</option>
      <option value="mixed">Mixed</option>
    </select>
    <label>Players:</label>
    <input type="number" id="players" min="1" max="100" value="5">
    <label>Imposters:</label>
    <input type="number" id="imposters" min="1" max="1" value="1">
    <button id="start">Start Game</button>
  </div>

  <!-- Game -->
  <div id="game" class="hidden">
    <div class="question-box">
      <p id="instructions"></p>
      <p id="questionText" class="hidden"></p>
    </div>
    <button id="mainButton"></button>
    <button id="restart">Restart</button>
  </div>

  <!-- Results -->
  <div id="results" class="hidden">
    <h3>Results:</h3>
    <div id="resultsContent"></div>
  </div>
</div>

<script>
let questions = {};
let players = [];
let currentPlayer = 0;
let numPlayers = 5;
let numImposters = 1;
let category = "sfw";
let qtype = "number";
let step = "playerQuestion";

// Accent colors for categories
const categoryColors = { sfw: '#17585c', mixednsfw:'#172a5c', dontworrynsfw:'#37175c' };

fetch('questions.json').then(r=>r.json()).then(data=>questions=data);

const instructionsEl = document.getElementById('instructions');
const questionEl = document.getElementById('questionText');
const mainButton = document.getElementById('mainButton');
const resultsEl = document.getElementById('results');
const resultsContent = document.getElementById('resultsContent');
const categoryEl = document.getElementById('category');

categoryEl.addEventListener('change', ()=>{
  document.documentElement.style.setProperty('--accent-color', categoryColors[categoryEl.value]);
});

document.getElementById('start').addEventListener('click', ()=>{
  numPlayers = parseInt(document.getElementById('players').value);
  numImposters = parseInt(document.getElementById('imposters').value);

  if(numImposters >= numPlayers){
    alert("Imposters must be fewer than players. Adjusting automatically.");
    numImposters = numPlayers - 1;
    document.getElementById('imposters').value = numImposters;
  }

  category = document.getElementById('category').value;
  qtype = document.getElementById('qtype').value;

  // Build question pool based on selection
  let pool = [];
  if(category === "sfw") pool = (qtype==="number"?questions.sfw_number:qtype==="phrase"?questions.sfw_phrase:questions.sfw_number.concat(questions.sfw_phrase));
  else if(category === "mixednsfw") pool = (qtype==="number"?questions.nsfw_number:qtype==="phrase"?questions.nsfw_phrase:questions.nsfw_number.concat(questions.nsfw_phrase));
  else pool = (qtype==="number"?questions.nsfw_number:qtype==="phrase"?questions.nsfw_phrase:questions.nsfw_number.concat(questions.nsfw_phrase));

  if(pool.length === 0){
    alert("No questions available for selected category and type!");
    return;
  }

  // Pick random question for this round
  const selectedQ = pool[Math.floor(Math.random()*pool.length)];

  // Assign question to all players
  players = Array(numPlayers).fill().map(()=>({real:selectedQ.real, imposter:selectedQ.imposter, isImposter:false}));

  // Randomly assign imposters
  let availableIndexes = [...Array(numPlayers).keys()];
  for(let i=0; i<numImposters; i++){
    const randIdx = Math.floor(Math.random()*availableIndexes.length);
    const playerIndex = availableIndexes.splice(randIdx,1)[0];
    players[playerIndex].isImposter = true;
  }

  document.getElementById('setup').classList.add('hidden');
  document.getElementById('game').classList.remove('hidden');
  resultsEl.classList.add('hidden');
  currentPlayer = 0;
  step = "playerQuestion";
  showPlayerStep();
});

function showPlayerStep(){
  questionEl.classList.add('hidden');
  instructionsEl.textContent = `Player ${currentPlayer+1}, press the button to see your question.`;
  mainButton.textContent = "Show Question";
}

mainButton.addEventListener('click', ()=>{
  if(step==="playerQuestion"){
    if(questionEl.classList.contains('hidden')){
      questionEl.textContent = players[currentPlayer].isImposter ? players[currentPlayer].imposter : players[currentPlayer].real;
      questionEl.classList.remove('hidden');
      instructionsEl.textContent = `Player ${currentPlayer+1}, memorize your question and pass the device.`;
      mainButton.textContent = "Hide Question";
    } else {
      questionEl.classList.add('hidden');
      currentPlayer++;
      if(currentPlayer < numPlayers) showPlayerStep();
      else {
        step="stateAnswers";
        instructionsEl.textContent="All players have seen their questions. Discuss and state your answers aloud.";
        mainButton.textContent="Reveal Real Question";
      }
    }
  } else if(step==="stateAnswers"){
    resultsContent.innerHTML="<strong>Real Question:</strong><br>"+players[0].real+"<br>";
    resultsEl.classList.remove('hidden');
    step="revealImposter";
    instructionsEl.textContent="Now reveal the imposter question(s).";
    mainButton.textContent="Reveal Imposter Question(s)";
  } else if(step==="revealImposter"){
    let imposters = players.filter(p=>p.isImposter);
    if(imposters.length>0){
      resultsContent.innerHTML+="<br><strong>Imposter Question(s):</strong><br>";
      imposters.forEach(p=>resultsContent.innerHTML+=p.imposter+"<br>");
    } else resultsContent.innerHTML+="<br><strong>No imposters this round.</strong>";
    instructionsEl.textContent="Game over! Discuss who the imposter was and share your original questions.";
    mainButton.textContent="Done";
    step="done";
  }
});

document.getElementById('restart').addEventListener('click',()=>{location.reload();});
</script>
</body>
</html>

