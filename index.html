<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>That one game where you have to find out who has a different question | PennBrennFun</title>
<link rel="icon" type="image/png" href="play.png">
<meta name="description" content="Each player gets a question and answers it in their head. Pass the device around. When everyone gets their question, they go around answering. DO NOT TALK UNTIL AFTER THE REAL QUESTION IS REVEALED. Then the real question is shown. Players guess who the imposter is. Justify your answer — even if you’re the imposter. Once the imposter is revealed, everyone shares their question. A moderator can view the real and imposter questions at the end.">
<style>
  body {font-family: Arial, sans-serif; margin:0; padding:0; display:flex; justify-content:center; align-items:center; min-height:100vh; background:#121212; color:#f0f0f0; text-align:center;}
  .container {max-width: 500px; width: 90%;}
  select, input[type=number], button {width:100%; padding:10px; margin:5px 0; font-size:1em; border-radius:8px; border:none;}
  button {background:#1e88e5; color:white; cursor:pointer;}
  button:hover {background:#1565c0;}
  .hidden {display:none;}
  .question-box {background:#1f1f1f; padding:20px; border-radius:10px; margin:20px 0;}
  #questionText {font-size: 1.5em; font-weight: bold; margin-top: 10px;}
  #resultsContent {text-align:left; margin-top:10px;}
</style>
</head>
<body>
<div class="container">
  <!-- Setup -->
  <div id="setup">
    <h2>How to play:</h2>
    <p>Each player will see a question and answer it in their head. Pass the device after each turn. After all players have seen their questions, discuss your answers aloud, then reveal the real and imposter questions.</p>
    <label>Category:</label>
    <select id="category">
      <option value="sfw">SFW</option>
      <option value="mixednsfw">Mixed NSFW</option>
      <option value="dontworrynsfw">Worry NSFW</option>
    </select>
    <label>Question Type:</label>
    <select id="qtype">
      <option value="number">Number</option>
      <option value="phrase">Phrase</option>
      <option value="mixed">Mixed</option>
    </select>
    <label>Players:</label>
    <input type="number" id="players" min="1" max="100" value="5">
    <label>Imposters:</label>
    <input type="number" id="imposters" min="1" max="1" value="1">
    <button id="start">Start Game</button>
  </div>

  <!-- Game -->
  <div id="game" class="hidden">
    <div class="question-box">
      <p id="instructions"></p>
      <p id="questionText" class="hidden"></p>
    </div>
    <button id="mainButton"></button>
    <button id="restart">Restart</button>
  </div>

  <!-- Results -->
  <div id="results" class="hidden">
    <h3>Results:</h3>
    <div id="resultsContent"></div>
  </div>
</div>

<script>
let questions = {};
let players = [];
let currentPlayer = 0;
let numPlayers = 5;
let numImposters = 1;
let category = "sfw";
let qtype = "number";
let step = "playerQuestion"; // game state

fetch('questions.json')
  .then(res => res.json())
  .then(data => questions = data);

const instructionsEl = document.getElementById('instructions');
const questionEl = document.getElementById('questionText');
const mainButton = document.getElementById('mainButton');
const resultsEl = document.getElementById('results');
const resultsContent = document.getElementById('resultsContent');

document.getElementById('start').addEventListener('click', () => {
  numPlayers = parseInt(document.getElementById('players').value);
  numImposters = parseInt(document.getElementById('imposters').value);
  category = document.getElementById('category').value;
  qtype = document.getElementById('qtype').value;

  // Build question pool
  let pool = [];
  if(category === "sfw") pool = qtype==="number"?questions.sfw_number:qtype==="phrase"?questions.sfw_phrase:questions.sfw_number.concat(questions.sfw_phrase);
  else if(category === "mixednsfw") pool = qtype==="number"?questions.nsfw_number:qtype==="phrase"?questions.nsfw_phrase:questions.nsfw_number.concat(questions.nsfw_phrase);
  else pool = qtype==="number"?questions.nsfw_number:qtype==="phrase"?questions.nsfw_phrase:questions.nsfw_number.concat(questions.nsfw_phrase);

  pool = pool.sort(() => Math.random()-0.5);
  let selectedQ = pool[0]; // all players get the same question

  // Assign to players
  players = [];
  for(let i=0;i<numPlayers;i++){
    players.push({real:selectedQ.real, imposter:selectedQ.imposter, isImposter:false});
  }

  // Assign imposters
  let impostersAssigned = 0;
  while(impostersAssigned < numImposters){
    let idx = Math.floor(Math.random()*numPlayers);
    if(!players[idx].isImposter){
      players[idx].isImposter = true;
      impostersAssigned++;
    }
  }

  document.getElementById('setup').classList.add('hidden');
  document.getElementById('game').classList.remove('hidden');
  resultsEl.classList.add('hidden');
  currentPlayer = 0;
  step = "playerQuestion";
  showPlayerStep();
});

function showPlayerStep(){
  questionEl.classList.add('hidden');
  instructionsEl.textContent = `Player ${currentPlayer+1}, press the button to see your question.`;
  mainButton.textContent = "Show Question";
}

mainButton.addEventListener('click', ()=>{
  if(step==="playerQuestion"){
    if(questionEl.classList.contains('hidden')){
      // Show question
      questionEl.textContent = players[currentPlayer].isImposter ? players[currentPlayer].imposter : players[currentPlayer].real;
      questionEl.classList.remove('hidden');
      instructionsEl.textContent = `Player ${currentPlayer+1}, memorize your question and pass the device.`;
      mainButton.textContent = "Hide Question";
    } else {
      // Hide question, next player
      questionEl.classList.add('hidden');
      currentPlayer++;
      if(currentPlayer < numPlayers){
        showPlayerStep();
      } else {
        step = "stateAnswers";
        instructionsEl.textContent = "All players have seen their questions. Discuss and state your answers aloud.";
        mainButton.textContent = "Reveal Real Questions";
      }
    }
  } else if(step==="stateAnswers"){
    // Reveal real questions
    let content = "<strong>Real Questions:</strong><br>";
    players.forEach((p,i)=>{content += `Player ${i+1}: ${p.real}<br>`;});
    resultsContent.innerHTML = content;
    resultsEl.classList.remove('hidden');
    step = "revealImposter";
    instructionsEl.textContent = "These are the real questions. Now reveal the imposter question(s).";
    mainButton.textContent = "Reveal Imposter Question(s)";
  } else if(step==="revealImposter"){
    let content = "<strong>Imposter Questions:</strong><br>";
    players.forEach((p,i)=>{if(p.isImposter) content += `Player ${i+1} (Imposter): ${p.imposter}<br>`;});
    resultsContent.innerHTML += content;
    instructionsEl.textContent = "Game over! Discuss who the imposter was and share your original questions.";
    mainButton.textContent = "Done";
    step = "done";
  }
});

document.getElementById('restart').addEventListener('click',()=>{location.reload();});
</script>
</body>
</html>
